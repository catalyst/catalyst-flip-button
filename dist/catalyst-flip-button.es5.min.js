'use strict';var _createClass=function(){function a(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,'value'in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}();function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError('Cannot call a class as a function')}function _possibleConstructorReturn(a,b){if(!a)throw new ReferenceError('this hasn\'t been initialised - super() hasn\'t been called');return b&&('object'==typeof b||'function'==typeof b)?b:a}function _inherits(a,b){if('function'!=typeof b&&null!==b)throw new TypeError('Super expression must either be null or a function, not '+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}(function(){function a(){var a='catalyst-flip-button',b={SPACE:32,ENTER:13,LEFT:37,UP:38,RIGHT:39,DOWN:40},c=document.createElement('template');c.innerHTML='<style>:host{display:inline-block;contain:layout style;align-items:flex-start;cursor:default;margin:0;padding:1px 6px;box-sizing:content-box;font-family:inherit;font-size:83.33333%;font-weight:400;font-style:normal;font-variant:normal;font-stretch:normal;line-height:normal;text-rendering:auto;text-transform:none;text-indent:0;text-shadow:none;text-align:center;letter-spacing:normal;word-spacing:normal;vertical-align:bottom;-webkit-user-select:none;-moz-user-select:none;user-select:none;position:relative;color:#000000;perspective:100px}:host #card{position:absolute;top:0;right:0;bottom:0;left:0;transform-style:preserve-3d;transition:transform .4s ease}:host #card #front,:host #card #back{display:flex;align-items:center;justify-content:center;margin:0;position:absolute;top:0;right:0;bottom:0;left:0;backface-visibility:hidden;-webkit-appearance:var(--catalyst-flip-button-card-face-appearance, button);-moz-appearance:var(--catalyst-flip-button-card-face-appearance, button);appearance:var(--catalyst-flip-button-card-face-appearance, button);background:var(--catalyst-flip-button-card-face-background, #ddd);border:var(--catalyst-flip-button-card-face-border);border-radius:var(--catalyst-flip-button-card-face-border-radius)}:host #card #back{transform:rotateY(180deg)}:host(:focus){outline:none}:host(:focus) #card #front,:host(:focus) #card #back{outline:var(--catalyst-flip-button-card-face-focused-outline, #000 dotted 1px)}:host([hidden]),:host [hidden]{display:none}</style><div id="card"><div id="front"></div><div id="back"></div></div><div hidden><slot></slot></div>',window.ShadyCSS!==void 0&&ShadyCSS.prepareTemplate(c,a);var d=function(a){function d(){_classCallCheck(this,d);var a=_possibleConstructorReturn(this,(d.__proto__||Object.getPrototypeOf(d)).call(this));return a.attachShadow({mode:'open'}),a.shadowRoot.appendChild(c.content.cloneNode(!0)),a._cardElement=a.shadowRoot.querySelector('#card'),a._cardFrontFace=a._cardElement.querySelector('#front'),a._cardBackFace=a._cardElement.querySelector('#back'),a._flipped=!1,a._lastSelectedIndex=-1,a}return _inherits(d,a),_createClass(d,null,[{key:'observedAttributes',get:function get(){return['disabled']}}]),_createClass(d,[{key:'connectedCallback',value:function connectedCallback(){this._setUpFormElement(),this._upgradeProperty('disabled'),this._upgradeProperty('noAutoPerspective'),this.hasAttribute('role')||this.setAttribute('role','combobox'),this.hasAttribute('tabindex')||this.setAttribute('tabindex',0),this.hasAttribute('aria-disabled')||this.setAttribute('aria-disabled',this.disabled),this.hasAttribute('aria-live')||this.setAttribute('aria-live','polite'),this.addEventListener('keydown',this._onKeyDown),this.addEventListener('click',this._onLeftClick),this.addEventListener('contextmenu',this._onRightClick),this._selectObserver=new MutationObserver(this._onLightDomMutation.bind(this)),this._selectObserver.observe(this,{childList:!0}),this._setUpDimensions(),void 0!==window.ShadyCSS&&ShadyCSS.styleElement(this)}},{key:'_upgradeProperty',value:function _upgradeProperty(a){if(this.hasOwnProperty(a)){var b=this[a];delete this[a],this[a]=b}else this.hasAttribute(a)&&(this[a]=this.getAttribute(a))}},{key:'_setUpFormElement',value:function _setUpFormElement(){var a=this.querySelector('select');if(null!==a&&a!==this._formElement){if(null!==this._formElement&&void 0!==this._formElement&&this._formElement.removeEventListener('change',this.notifySelectedOptionChanged.bind(this)),void 0!==this._optionsObserver&&(this._optionsObserver.disconnect(),this._optionsObserver=void 0),this._formElement=a,this._formElement.addEventListener('change',this.notifySelectedOptionChanged.bind(this)),this._optionsObserver=new MutationObserver(this._onOptionsMutation.bind(this)),this._optionsObserver.observe(this._formElement,{childList:!0}),0<this._formElement.labels.length){for(var b,c=[],d=0;d<this._formElement.labels.length;d++)b=this._formElement.labels[d],''===b.id&&(b.id=this._generateGuid()),c.push(b.id);this.setAttribute('aria-labelledby',labelledBy.join(' '))}else this.removeAttribute('aria-labelledby');this.notifySelectedOptionChanged()}}},{key:'_setUpDimensions',value:function _setUpDimensions(){var a=Number.parseInt;this.style.minWidth='',this.style.minHeight='';var b=getComputedStyle(this),c=a(b.width,10),d=a(b.height,10),e=0===c,f=0===d;if(e||f){var g=0,h=0;this._cardElement.style.position='relative';var j=this._formElement.options;if(0<j.length){this._cardFrontFace.style.position='relative',this._cardBackFace.style.position='relative';var k=this._cardFrontFace.textContent;this._cardFrontFace.textContent='';var l=this._cardBackFace.textContent;this._cardBackFace.textContent='';for(var m=0;m<j.length;m++){if(this._cardFrontFace.textContent=j[m].textContent,this._cardBackFace.textContent=j[m].textContent,e){var i=this._cardFrontFace.offsetWidth;i>g&&(g=i);var n=this._cardBackFace.offsetWidth;n>g&&(g=n)}if(f){var o=this._cardFrontFace.offsetHeight;o>h&&(h=o);var p=this._cardBackFace.offsetHeight;p>g&&(g=p)}}this._cardFrontFace.textContent=k,this._cardBackFace.textContent=l,this._cardFrontFace.style.position='',this._cardBackFace.style.position=''}if(this._cardElement.style.position='',e){var q=g+2;this.style.minWidth=q+'px',this.noAutoPerspective||(this.style.perspective=2*(q+a(b.paddingLeft,10)+a(b.paddingRight,10))+'px')}if(f){var r=h+2;this.style.minHeight=r+'px'}}}},{key:'disconnectedCallback',value:function disconnectedCallback(){this.removeEventListener('keydown',this._onKeyDown),this.removeEventListener('click',this._onLeftClick),this.removeEventListener('contextmenu',this._onRightClick),null!==this._selectObserver&&(this._selectObserver.disconnect(),this._selectObserver=void 0),this._formElement=void 0,null!==this._optionsObserver&&(this._optionsObserver.disconnect(),this._optionsObserver=void 0)}},{key:'attributeChangedCallback',value:function attributeChangedCallback(a,b,c){var d=null!==c;'disabled'===a?(this.setAttribute('aria-disabled',d),d?this.hasAttribute('tabindex')&&(this._tabindexBeforeDisabled=this.getAttribute('tabindex'),this.removeAttribute('tabindex'),this.blur()):!this.hasAttribute('tabindex')&&void 0!==this._tabindexBeforeDisabled&&null!==this._tabindexBeforeDisabled&&this.setAttribute('tabindex',this._tabindexBeforeDisabled)):void 0}},{key:'_onKeyDown',value:function _onKeyDown(a){if(!a.altKey)switch(a.keyCode){case b.SPACE:case b.ENTER:a.preventDefault(),this._flip();break;case b.LEFT:case b.UP:a.preventDefault(),this.previous();break;case b.RIGHT:case b.DOWN:a.preventDefault(),this.next();break;default:}}},{key:'_onLeftClick',value:function _onLeftClick(a){a.preventDefault(),this.next()}},{key:'_onRightClick',value:function _onRightClick(a){a.preventDefault(),this.previous()}},{key:'notifySelectedOptionChanged',value:function notifySelectedOptionChanged(){if(null!==this._formElement&&0!==this._formElement.length){var a=this._formElement.selectedOptions[0];this._flipped?this._cardBackFace.textContent=a.textContent:this._cardFrontFace.textContent=a.textContent,this._update()}}},{key:'_onLightDomMutation',value:function _onLightDomMutation(a){var b,c=!1,d=!1;b=!1;for(var e=0;e<a.length;e++)0<a[e].addedNodes.length&&(c=!0),0<a[e].removedNodes.length&&(d=!0);if(c||d){var f=this._formElement;this._setUpFormElement(),this._formElement!==f&&(b=!0)}b&&this._setUpDimensions()}},{key:'_onOptionsMutation',value:function _onOptionsMutation(a){var b,c=!1,d=!1;b=!1;for(var e=0;e<a.length;e++){for(var f=0;f<a[e].addedNodes.length;f++)if('OPTION'===a[e].addedNodes[f].tagName){c=!0;break}for(var g=0;g<a[e].addedNodes.length;g++)if('OPTION'===a[e].addedNodes[g].tagName){d=!0;break}null!==this._formElement&&0===this._formElement.length&&(b=!0)}c||d,b&&this._setUpDimensions()}},{key:'next',value:function next(){this._flip(!0)}},{key:'previous',value:function previous(){this._flip(!1)}},{key:'_flip',value:function _flip(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:!0;if(!(null===this._formElement||this.disabled)){var b=this._formElement.selectedIndex+(a?1:-1),c=this._formElement.length;this._lastSelectedIndex=this._formElement.selectedIndex,this._formElement.selectedIndex=(b%c+c)%c,this.dispatchEvent(new CustomEvent('change',{detail:{selectedIndex:this._formElement.selectedIndex,selectedOptions:this._formElement.selectedOptions},bubbles:!0})),this.notifySelectedOptionChanged()}}},{key:'_update',value:function _update(){if(null!==this._formElement){this.setAttribute('value',this._formElement.value);var a=this._lastSelectedIndex+1===this._formElement.length&&0===this._formElement.selectedIndex,b=0===this._lastSelectedIndex&&this._formElement.selectedIndex+1===this._formElement.length;if(a||b){this._cardElement.style.transition='none';var c=a?180:-180*(this._formElement.selectedIndex+1);if(this._cardElement.style.transform='rotateY('+c+'deg)',1==this._formElement.length%2){var d=this._cardFrontFace;this._cardFrontFace=this._cardBackFace,this._cardBackFace=d,this._cardFrontFace.id='front',this._cardBackFace.id='back',this._flipped=!this._flipped}setTimeout(this._playTransition.bind(this),0)}else this._playTransition()}}},{key:'_playTransition',value:function _playTransition(){this._cardElement.style.transition='';var a=-180*this._formElement.selectedIndex;this._cardElement.style.transform='rotateY('+a+'deg)',this._flipped=!this._flipped}},{key:'_generateGuid',value:function _generateGuid(){var a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)};return a()+a()+'-'+a()+'-'+a()+'-'+a()+'-'+a()+a()+a()}},{key:'disabled',set:function set(a){var b=!!a;this._formElement.disabled=b,b?this.setAttribute('disabled',''):this.removeAttribute('disabled')},get:function get(){return this.hasAttribute('disabled')}},{key:'noAutoPerspective',set:function set(a){!!a?this.setAttribute('no-auto-perspective',''):this.removeAttribute('no-auto-perspective')},get:function get(){return this.hasAttribute('no-auto-perspective')}}]),d}(HTMLElement);window.CatalystFlipButton=d,window.customElements.define(a,d)}window.WebComponents===void 0||window.WebComponents.ready?a():window.addEventListener('WebComponentsReady',function(){a()})})();